---
created: '2025-05-19 18:44:57'
feishu_url: https://wk5tnvpfe7.feishu.cn/docx/ZRDddhs1so2Rojx1KJAcuzhJn8g
modified: '2025-05-19 18:46:05'
source: feishu
title: 08-国产化相关
---

08-国产化相关
TongWeb启动
调整启动脚本，增加agent
/data/tongweb/TongWeb7.0.8.73/bin

#!/bin/sh
ulimit -n 65535 >/dev/null 2>&1
PRG="$0"
while [ -h "$PRG" ]; do
  ls=`ls -ld "$PRG"`
  link=`expr "$ls" : '.*-> \(.*\)$'`
  if expr "$link" : '/.*' > /dev/null; then
    PRG="$link"
  else
    PRG=`dirname "$PRG"`/"$link"
  fi
done
PRGDIR=`dirname "$PRG"`

[ -z "${tongweb_home}" ] && tongweb_home=`cd "$PRGDIR/.." >/dev/null; pwd`
export tongweb_home

if [ -e $(cd "$(dirname "$0")";pwd)/JAVA_HOME.txt ] ; then
  CUSTOM_JAVA_HOME=$(cat $(cd "$(dirname "$0")";pwd)/JAVA_HOME.txt)
  if [ -n "$CUSTOM_JAVA_HOME" ]; then
    JAVA_HOME=$CUSTOM_JAVA_HOME
    PATH=$JAVA_HOME/bin:$PATH
    export JAVA_HOME
    export PATH
  fi
fi
last_part="${tongweb_base##*/}"

# java -agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=7777 -jar "${tongweb_home}/bin/tongweb-launcher.jar" $@
java -javaagent:/data/skywalking-agent/skywalking-agent.jar=agent.service_name=${last_part},agent.namespace=tok_e7d6e51461ce41efb78f65fee197260d,collector.backend_service=172.29.234.103:11800,skywalking_config=/data/skywalking-agent/config/agent.config -jar "${tongweb_home}/bin/tongweb-launcher.jar" $@
~                                                                                                                 

---
created: '2024-05-29 10:29:06'
feishu_url: https://wk5tnvpfe7.feishu.cn/docx/MEKWdcewLo2HBrx0rIVcjFl9nPd
modified: '2024-05-29 11:25:32'
source: feishu
title: 融通缺陷修复梳理
---

融通缺陷修复梳理
空闲不进线的问题
优化代码走的的问题
异常处理
csRes.setConsumerRes(false);
consumerResList.add(csRes);
String unFreeSeatLockKey = String.format(SysStaticField.UNFREE_SEAT_LOCK_TAG_KEY, freeSeat.getSeatCallId());
String unFreeSeatLockTimeStamp = RedisUtils.getInstance().get(unFreeSeatLockKey);
// 防止此时座席在页面点击切换非空闲状态
if (StringUtils.isEmpty(unFreeSeatLockTimeStamp)) {
    //fsQueue.add(freeSeat);
    unprocessedFs.put(freeSeat.getSeatNo(), freeSeat);
    sqQueue.add(seatQueueMsg);
} else {
    ACD_LOG.warn("座席在freeseat分配过程中手动切换了非空闲状态, 此时不用再释放freeseat, seatCallId:{}", freeSeat.getSeatCallId());
    //    unprocessedSq.put(seatQueueMsg.getRedisKey(), seatQueueMsg);
    unprocessedFs.put(freeSeat.getSeatNo(), freeSeat);
}
csRes.setConsumerRes(false);
consumerResList.add(csRes);
加入电话排队队列后立马被消费，
加入空闲座席队队列后立马被消费，
磐石缺陷
座席技能等级一致且处于多技能组时，承接通话未按排队长者优先


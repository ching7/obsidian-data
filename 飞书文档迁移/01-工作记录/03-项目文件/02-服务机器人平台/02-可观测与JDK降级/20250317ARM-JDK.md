---
created: '2025-03-17 15:14:20'
feishu_url: https://wk5tnvpfe7.feishu.cn/docx/BKjhdnYp8oRRMhx1AXXczLNNnWg
modified: '2025-07-03 11:05:56'
source: feishu
title: 20250317ARM-JDK
---

20250317ARM-JDK
ARM
Dockerfile
# ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒï¼ˆARM64 å…¼å®¹ï¼‰
FROM artifacts.iflytek.com/docker-repo/library/centos:7

LABEL maintainer="iflytek"

ENV LANG C.UTF-8
ENV LANGUAGE en_US:en
ENV LC_ALL en_US.UTF-8

ENV JAVA_HOME /usr/local/jdk8
ENV PATH $JAVA_HOME/bin:$PATH

# å®šä¹‰ JDK æ–‡ä»¶å
ENV JDK_FILE jdk-8u202-linux-arm64-vfp-hflt.tar.gz

RUN curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-altarch-7.repo

# å®‰è£… yum å’Œå¸¸ç”¨å·¥å…·
RUN yum install -y wget curl vim && \
    yum clean all

# å¤åˆ¶ JDK æ–‡ä»¶
COPY $JDK_FILE /usr/local/

# è§£å‹ JDK æ–‡ä»¶
RUN mkdir -p "$JAVA_HOME" && \
    tar -xvf /usr/local/$JDK_FILE -C "$JAVA_HOME" --strip-components 1 --no-same-owner && \
    rm /usr/local/$JDK_FILE

# æµ‹è¯• JDK å’Œ yum
RUN java -version && yum --version

# ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒï¼ˆARM64 å…¼å®¹ï¼‰
FROM artifacts.iflytek.com/docker-repo/library/centos:7

LABEL maintainer="iflytek"

# è®¾ç½®è¯­è¨€ç¯å¢ƒ
ENV LANG C.UTF-8
ENV LANGUAGE en_US:en
ENV LC_ALL en_US.UTF-8

# å®šä¹‰ JDK ç›¸å…³ç¯å¢ƒå˜é‡
ENV JAVA_HOME /usr/java/jdk1.8.0_441
ENV PATH $JAVA_HOME/bin:$PATH

# å®šä¹‰ JDK å’Œ YUM åŒ…æ–‡ä»¶å
ENV JDK_FILE jdk-8u441-linux-aarch64.rpm

# æ›¿æ¢ YUM æºä¸ºé˜¿é‡Œäº‘ï¼ˆARM64 å…¼å®¹ï¼‰
RUN curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-altarch-7.repo

# å®‰è£… yum å’Œå¸¸ç”¨å·¥å…·
RUN yum install -y wget curl vim && \
    yum clean all

# å°†æœ¬åœ° JDK RPM åŒ…å¤åˆ¶åˆ°å®¹å™¨ä¸­
COPY $JDK_FILE /tmp/

# ä½¿ç”¨ rpm å‘½ä»¤å®‰è£… JDK
RUN rpm -ivh /tmp/$JDK_FILE && \
    rm -f /tmp/$JDK_FILE

# æµ‹è¯• JDK å’Œ yum æ˜¯å¦å®‰è£…æˆåŠŸ
RUN java -version && yum --version

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# è®¾ç½®å®¹å™¨é»˜è®¤å¯åŠ¨å‘½ä»¤ï¼ˆç¤ºä¾‹ä¸ºè¾“å‡º Java ç‰ˆæœ¬ï¼‰
CMD ["java", "-version"]

dockerÂ buildÂ 
ocker build --network=host -t jdk8-arm:latest .
docker run -it jdk8-arm /bin/bash
docker tag jdk8-arm:latest artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk-arm:8_yum
docker push artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk-arm:8_yum

docker run -it jdk8-arm:1.0 /bin/bash
docker tag jdk8-arm:1.0 artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk8-arm:1.0
docker push artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk-arm:8_yum

docker run -it jdk8-arm:2.0 /bin/bash
docker tag jdk8-arm:2.0 artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk8-arm:2.0
docker push artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk8-arm:2.0

docker build --network=host -t jdk8-arm:3.0 .
docker run -it jdk8-arm:3.0 /bin/bash
docker tag jdk8-arm:3.0 artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk8-arm:3
docker push artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk8-arm:3
Dockerfile
# åŸºäºç§æœ‰ JDK ARM64 é•œåƒ
FROM artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk-arm:8_yum

# ç»´æŠ¤è€…ä¿¡æ¯
LABEL maintainer="iflytek"

# è®¾ç½®è¯­è¨€ç¯å¢ƒï¼Œé˜²æ­¢ä¹±ç 
ENV LANG=C.UTF-8
ENV LANGUAGE=en_US:en
ENV APP_RUN_ENV=k8s

# å¤‡ä»½åŸæœ‰çš„ YUM æºé…ç½®
RUN mv /etc/yum.repos.d /etc/yum.repos.d.bak && \
    mkdir -p /etc/yum.repos.d

# ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒæºï¼ˆå¯ä»¥é€‰æ‹©å…¶ä»–å›½å†…æºï¼Œå¦‚æ¸…åæºï¼‰
RUN curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-8.repo

# å®‰è£… EPEL æºï¼ˆè‡ªåŠ¨æ ¹æ®æ¶æ„é…ç½®ï¼‰
RUN yum clean all && \
    yum install -y epel-release

# ğŸ› ï¸ å®‰è£… LibreOffice å’Œä¸­æ–‡è¯­è¨€åŒ…
RUN yum install -y libreoffice libreoffice-langpack-zh_CN && \
    yum clean all

# ğŸš€ æ‹·è´å­—ä½“ï¼Œå¹¶è®¾ç½®å­—ä½“ç¼“å­˜
COPY simhei.ttf /usr/share/fonts/
COPY simkai.ttf /usr/share/fonts/
COPY simsun.ttc /usr/share/fonts/

# ğŸ”¥ åˆ·æ–°å­—ä½“ç¼“å­˜
RUN fc-cache -fv

# ğŸ” æµ‹è¯•å®‰è£…çŠ¶æ€
RUN libreoffice --version && fc-list | grep "Sim"

# å…¥å£å‘½ä»¤
CMD ["libreoffice", "--headless", "--nologo", "--nofirststartwizard"]# åŸºäºç§æœ‰ JDK ARM64 é•œåƒ
FROM artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk-arm:8_yum

# ç»´æŠ¤è€…ä¿¡æ¯
LABEL maintainer="iflytek"

# è®¾ç½®è¯­è¨€ç¯å¢ƒï¼Œé˜²æ­¢ä¹±ç 
ENV LANG=C.UTF-8
ENV LANGUAGE=en_US:en
ENV APP_RUN_ENV=k8s

# ä½¿ç”¨é˜¿é‡Œäº‘çš„ CentOS é•œåƒ
RUN yum install -y libreoffice libreoffice-langpack-zh_CN && \
    yum clean all
# ğŸš€ æ‹·è´å­—ä½“ï¼Œå¹¶è®¾ç½®å­—ä½“ç¼“å­˜
COPY simhei.ttf /usr/share/fonts/
COPY simkai.ttf /usr/share/fonts/
COPY simsun.ttc /usr/share/fonts/

# ğŸ”¥ åˆ·æ–°å­—ä½“ç¼“å­˜
RUN fc-cache -fv

# ğŸ” æµ‹è¯•å®‰è£…çŠ¶æ€
RUN libreoffice --version && fc-list | grep "Sim"

# å…¥å£å‘½ä»¤
CMD ["libreoffice", "--headless", "--nologo", "--nofirststartwizard"]
dockerÂ buildÂ 
docker build --network=host -t jdk-arm-libreoffice:latest .
docker tag jdk-arm-libreoffice:latest artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk-arm:8_yum_libreoffice
docker push  artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk-arm:8_yum_libreoffice

docker run -it jdk-arm-libreoffice /bin/bash

libreoffice --headless --invisible --convert-to pdf /app/test.docx  --outdir /app/
docker commit 9a16725ac279 jdk-arm-libreoffice:latest

update-alternatives --display java
X86
JDK-yum-Dockerfile
FROM centos:7

# å¤‡ä»½åŸæœ‰çš„è½¯ä»¶æºé…ç½®æ–‡ä»¶
RUN mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup

# ä½¿ç”¨é˜¿é‡Œäº‘çš„ CentOS é•œåƒ
RUN curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo

# è®¾ç½® locale ç¯å¢ƒå˜é‡
ENV LANG=zh_CN.UTF-8
ENV LANGUAGE=zh_CN:zh

# å®‰è£… JDK 8
ADD jdk-8u202-linux-x64.rpm /tmp/
RUN yum localinstall -y /tmp/jdk-8u202-linux-x64.rpm && \
    yum clean all && \
    rm -f /tmp/jdk-8u202-linux-x64.rpm
# è®¾ç½® JAVA_HOME å’Œæ›´æ–° PATH ç¯å¢ƒå˜é‡ 
ENV JAVA_HOME=/usr/java/jdk1.8.0_202-amd64/bin
ENV PATH=$JAVA_HOME/bin:$PATH

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# è®¾ç½®é»˜è®¤å‘½ä»¤
CMD ["java", "-version"]
dockerÂ buildÂ 
docker build --network=host -t jdk8-yum:latest .
docker run -it jdk8-yum /bin/bash

yum repolist
docker tag jdk8-yum:latest artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk:8_yum
docker push artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk:8_yum


docker build --network=host -t jdk8-yum-libreoffice:latest .
docker tag jdk8-yum-libreoffice:latest artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk:8_yum_libreoffice
docker push  artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk:8_yum_libreoffice

docker run -it jdk8-yum-libreoffice /bin/bash

libreoffice --headless --invisible --convert-to pdf /app/test.docx  --outdir /app/
docker commit b5df731a3b59 jdk8-yum-libreoffice:latest
JDK-yum-Dockerfile
FROM artifacts.iflytek.com/znfw-docker-private/znfw_base/java/jdk:8_yum
#LANGUAGE ENV
ENV LANG C.UTF-8
ENV LANGUAGE en_US:en
ENV LC_ALL en_US.UTF-8
ENV APP_RUN_ENV k8s
# å®‰è£…libreoffice
RUN yum  -y install libreoffice
RUN yum  -y install libreoffice-langpack-zh_CN
COPY simhei.ttf /usr/lib64/libreoffice/share/fonts/truetype/
COPY simkai.ttf /usr/lib64/libreoffice/share/fonts/truetype/
COPY simsun.ttc /usr/lib64/libreoffice/share/fonts/truetype/
liboffice test

libreoffice --headless --invisible --convert-to pdf /app/test.docx  --outdir /app/

# æ–¹å¼2ï¼šæ„å»ºåæ‰‹åŠ¨æ›´æ–°JDK
# update-alternatives --install /usr/bin/java java /usr/java/jdk1.8.0_202-amd64/bin/java 100
# update-alternatives --install /usr/bin/javac javac /usr/java/jdk1.8.0_202-amd64/bin/javac 100
# update-alternatives --install /usr/bin/jar jar /usr/java/jdk1.8.0_202-amd64/bin/jar 100
# update-alternatives --set java /usr/java/jdk1.8.0_202-amd64/bin/java
# update-alternatives --set javac /usr/java/jdk1.8.0_202-amd64/bin/javac
# update-alternatives --set jar /usr/java/jdk1.8.0_202-amd64/bin/jar
# docker run , docker commit, docker push é‡æ–°push

update-alternatives --install /usr/bin/java java /usr/local/jdk8/bin/java 100
update-alternatives --install /usr/bin/javac javac /usr/local/jdk8/bin/javac 100
update-alternatives --install /usr/bin/jar jar /usr/local/jdk8/bin/jar 100
update-alternatives --set java /usr/local/jdk8/bin/java
update-alternatives --set javac /usr/local/jdk8/bin/javac
update-alternatives --set jar /usr/local/jdk8/bin/jar


[root@29d29594c752 /]# update-alternatives --display java
java - status is manual.
 link currently points to /usr/local/jdk8/bin/java
/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/java - family java-1.8.0-openjdk.aarch64 priority 1800412
 slave alt-java: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/alt-java
 slave jjs: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/jjs
 slave keytool: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/keytool
 slave orbd: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/orbd
 slave pack200: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/pack200
 slave policytool: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/policytool
 slave rmid: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/rmid
 slave rmiregistry: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/rmiregistry
 slave servertool: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/servertool
 slave tnameserv: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/tnameserv
 slave unpack200: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/unpack200
 slave jre_exports: /usr/lib/jvm-exports/jre-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64
 slave jre: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre
 slave alt-java.1.gz: /usr/share/man/man1/alt-java-java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64.1.gz
 slave java.1.gz: /usr/share/man/man1/java-java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64.1.gz
 slave jjs.1.gz: /usr/share/man/man1/jjs-java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64.1.gz
 slave keytool.1.gz: /usr/share/man/man1/keytool-java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64.1.gz
 slave orbd.1.gz: /usr/share/man/man1/orbd-java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64.1.gz
 slave pack200.1.gz: /usr/share/man/man1/pack200-java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64.1.gz
 slave policytool.1.gz: /usr/share/man/man1/policytool-java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64.1.gz
 slave rmid.1.gz: /usr/share/man/man1/rmid-java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64.1.gz
 slave rmiregistry.1.gz: /usr/share/man/man1/rmiregistry-java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64.1.gz
 slave servertool.1.gz: /usr/share/man/man1/servertool-java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64.1.gz
 slave tnameserv.1.gz: /usr/share/man/man1/tnameserv-java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64.1.gz
 slave unpack200.1.gz: /usr/share/man/man1/unpack200-java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64.1.gz
/usr/local/jdk8/bin/java - priority 100
 slave alt-java: (null)
 slave jjs: (null)
 slave keytool: (null)
 slave orbd: (null)
 slave pack200: (null)
 slave policytool: (null)
 slave rmid: (null)
 slave rmiregistry: (null)
 slave servertool: (null)
 slave tnameserv: (null)
 slave unpack200: (null)
 slave jre_exports: (null)
 slave jre: (null)
 slave alt-java.1.gz: (null)
 slave java.1.gz: (null)
 slave jjs.1.gz: (null)
 slave keytool.1.gz: (null)
 slave orbd.1.gz: (null)
 slave pack200.1.gz: (null)
 slave policytool.1.gz: (null)
 slave rmid.1.gz: (null)
 slave rmiregistry.1.gz: (null)
 slave servertool.1.gz: (null)
 slave tnameserv.1.gz: (null)
 slave unpack200.1.gz: (null)
Current `best' version is /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.412.b08-1.el7_9.aarch64/jre/bin/java.
